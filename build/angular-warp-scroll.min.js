/*! angular-warp-scroll
version: 0.2.0
build date: 2016-3-21
author: Michael Czechowski (nextlevelshit)
https://github.com/nextlevelshit/angular-warp-scroll.git */
var app=angular.module("app",[]);app.directive("dots",function(){return{templateUrl:"src/templates/dots.html",scope:{status:"="},link:function(t){t.scrollToSlide=function(e){var s=e*t.status.slideScrollHeight;$("body, html").animate({scrollTop:s},1200)}}}}),app.factory("scrollService",["$window","$document",function(t,e){return{progress:function(){return this.scrollTop()/this.maxScroll()},scrollTop:function(){return t.pageYOffset},maxScroll:function(){return this.outerHeight()-this.innerHeight()},outerHeight:function(){var t=e[0].documentElement,s=e[0].body;return Math.max(s.scrollHeight,t.scrollHeight,s.offsetHeight,t.offsetHeight,t.clientHeight)},innerHeight:function(){var s=e[0].documentElement.clientHeight,r=t.innerHeight;return s>r?r:s},slides:function(){var t=[];return angular.forEach(this.slidesDom(),function(e,s){e.style.zIndex=this.slidesNum()-s,t.push({id:s,active:this.activeSlide()===s,title:e.getAttribute("data-title")})},this),t},slidesDom:function(){return document.querySelectorAll(".slide")},slidesNum:function(){return this.slidesDom().length},slideHeight:function(){return this.outerHeight()/this.slidesNum()},slideScrollHeight:function(){return(this.outerHeight()-this.innerHeight())/(this.slidesNum()-1)},visibleSlidesObject:function(){var t=this.slidesNum()-1,e=Math.floor(t*this.progress()),s=Math.floor(t*this.progress())+1;return{foreground:{key:e,progress:t*this.progress()-e},background:{key:s,progress:t*this.progress()-s}}},activeSlide:function(){var t,e=1e3;return angular.forEach(this.slidesDom(),function(s,r){if(s.style.transform){var i=s.style.transform.match(/-?\d+[.]?\d*/,"")[0],o=Math.abs(0-i);e>o&&(e=o,t=r)}}),t}}}]),app.controller("scrollCtrl",["$scope","$log","$window","$document","scrollService",function(t,e,s,r,i){function o(){$("body").height(1e3*i.slidesNum())}function n(t){t.style.display="block"}function l(t){t.style.display="none"}function c(){angular.forEach(i.slidesDom(),function(t){l(t)}),angular.forEach(i.visibleSlidesObject(),function(t){var e=i.slidesDom()[t.key],s=t.progress<=0?-Math.pow(t.progress,2)+1:-Math.pow(t.progress,2)+1,r=t.progress<=0?3e3*Math.pow(t.progress,3):1e4*Math.pow(t.progress,3),o=t.progress<=0?10*Math.pow(t.progress,4):100*Math.pow(t.progress,4);n(e),e.style.opacity=s,e.style.transform=e.style.webkitTransform="translateZ("+r+"px)",e.style.filter="blur("+o+"px)"})}function u(){t.scrollStatus={progress:i.progress(),slides:i.slides(),slideScrollHeight:i.slideScrollHeight()}}function a(){c(),u()}o(),angular.element(s).bind("scroll",function(){a(),t.$apply()}),a()}]);