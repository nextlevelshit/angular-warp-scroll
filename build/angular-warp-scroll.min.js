/*! angular-warp-scroll
version: 0.0.2
build date: 2016-3-13
author: Michael Czechowski (nextlevelshit)
https://github.com/nextlevelshit/angular-warp-scroll.git */
var app=angular.module("app",[]);app.directive("dots",function(){return{templateUrl:"src/templates/dots.html",scope:{status:"="},link:function(t){t.scrollToSlide=function(e){var i=e*t.status.slideScrollHeight;$("body, html").animate({scrollTop:i},1200)}}}}),app.factory("scrollService",["$window","$document",function(t,e){return{progress:function(){return this.scrollTop()/this.maxScroll()},scrollTop:function(){return t.pageYOffset},maxScroll:function(){return this.outerHeight()-this.innerHeight()},outerHeight:function(){var t=e[0].documentElement,i=e[0].body;return Math.max(i.scrollHeight,t.scrollHeight,i.offsetHeight,t.offsetHeight,t.clientHeight)},innerHeight:function(){var i=e[0].documentElement.clientHeight,r=t.innerHeight;return i>r?r:i},slides:function(){var t=[];return angular.forEach(this.slidesDom(),function(e,i){e.style.zIndex=this.slidesNum()-i,t.push({id:i,active:this.activeSlide()===i})},this),t},slidesDom:function(){return document.querySelectorAll(".slide")},slidesNum:function(){return this.slidesDom().length},slideHeight:function(){return this.outerHeight()/this.slidesNum()},slideScrollHeight:function(){return(this.outerHeight()-this.innerHeight())/(this.slidesNum()-1)},activeSlide:function(){var t,e=1e3;return angular.forEach(this.slidesDom(),function(i,r){var n=i.style.transform.match(/-?\d+[.]?\d*/,"")[0],s=Math.abs(0-n);e>s&&(e=s,t=r)}),t}}}]),app.controller("scrollCtrl",["$scope","$log","$window","$document","scrollService",function(t,e,i,r,n){function s(){$("body").height(1e3*n.slidesNum())}function l(t,e){var i=o(t,e,.01);return u(i)}function o(t,e,i){return-Math.pow(t-e,2)/i+1}function u(t){return t>0?t:0}function c(){var t=1/(n.slidesNum()-1);angular.forEach(n.slidesDom(),function(e,i){var r=n.outerHeight()*(n.progress()-1)+n.slideHeight()*(n.slidesNum()-i-n.progress());e.style.transform=e.style.webkitTransform="translateZ("+r+"px)";var s=t*i,o=e.style.opacity=l(n.progress(),s);e.style.display=r<n.slideHeight()?"block":"none";var u=.9>o?Math.round(100*o)/20:0;u?e.style.filter=e.style.webkitFilter="blur("+u+"px)":e.style.filter=e.style.webkitFilter=""})}function a(){t.scrollStatus={progress:n.progress(),slides:n.slides(),slideScrollHeight:n.slideScrollHeight()}}function h(){c(),a()}s(),angular.element(i).bind("scroll",function(){h(),t.$apply()}),h()}]);