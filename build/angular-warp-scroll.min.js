/*! angular-warp-scroll
version: 0.3.0
build date: 2016-3-28
author: Michael Czechowski (nextlevelshit)
https://github.com/nextlevelshit/angular-warp-scroll.git */
!function(e,t){"object"==typeof exports||"object"==typeof module&&module.exports?module.exports=t(require("angular")):"function"==typeof define&&define.amd?define(["angular"],t):e.returnExports=t(e.angular)}(this,function(e){var t="warpScroll";e.module(t,[]).directive("dots",function(){return{templateUrl:"src/templates/dots.html",scope:{status:"="},link:function(e){e.scrollToSlide=function(t){var s=t*e.status.slideScrollHeight;$("body, html").animate({scrollTop:s},1200)}}}}).factory("scrollService",["$window","$document",function(t,s){return{progress:function(){return this.scrollTop()/this.maxScroll()},scrollTop:function(){return t.pageYOffset},maxScroll:function(){return this.outerHeight()-this.innerHeight()},outerHeight:function(){var e=s[0].documentElement,t=s[0].body;return Math.max(t.scrollHeight,e.scrollHeight,t.offsetHeight,e.offsetHeight,e.clientHeight)},innerHeight:function(){var e=s[0].documentElement.clientHeight,r=t.innerHeight;return e>r?r:e},slides:function(){var t=[];return e.forEach(this.slidesDom(),function(e,s){e.style.zIndex=this.slidesNum()-s,t.push({id:s,active:this.activeSlide()===s,title:e.getAttribute("data-title")})},this),t},slidesDom:function(){return document.querySelectorAll(".slide")},slidesNum:function(){return this.slidesDom().length},slideHeight:function(){return this.outerHeight()/this.slidesNum()},slideScrollHeight:function(){return(this.outerHeight()-this.innerHeight())/(this.slidesNum()-1)},visibleSlidesObject:function(){var e=this.slidesNum()-1,t=Math.floor(e*this.progress()),s=Math.floor(e*this.progress())+1;return{foreground:{key:t,progress:e*this.progress()-t},background:{key:s,progress:e*this.progress()-s}}},activeSlide:function(){var t,s=1e3;return e.forEach(this.slidesDom(),function(e,r){if(e.style.transform){var o=e.style.transform.match(/-?\d+[.]?\d*/,"")[0],i=Math.abs(0-o);s>i&&(s=i,t=r)}}),t}}}]).controller("scrollCtrl",["$scope","$log","$window","$document","scrollService",function(t,s,r,o,i){function n(){$("body").height(1e3*i.slidesNum())}function l(e){e.style.display="block"}function c(e){e.style.display="none"}function u(){e.forEach(i.slidesDom(),function(e){c(e)}),e.forEach(i.visibleSlidesObject(),function(e){var t=i.slidesDom()[e.key],s=e.progress<=0?-Math.pow(e.progress,2)+1:-Math.pow(e.progress,2)+1,r=e.progress<=0?3e3*Math.pow(e.progress,3):1e4*Math.pow(e.progress,3),o=e.progress<=0?10*Math.pow(e.progress,4):100*Math.pow(e.progress,4);l(t),t.style.opacity=s,t.style.transform=t.style.webkitTransform="translateZ("+r+"px)",t.style.filter="blur("+o+"px)"})}function a(){t.scrollStatus={progress:i.progress(),slides:i.slides(),slideScrollHeight:i.slideScrollHeight()}}function h(){u(),a()}n(),e.element(r).bind("scroll",function(){h(),t.$apply()}),h()}])});